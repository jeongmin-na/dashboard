# Gmail SMTP 이메일 발송 설정 가이드

## 📧 Gmail 앱 비밀번호 설정

### 1. Google 계정 보안 설정

1. **Google 계정 접속**
   - https://myaccount.google.com 접속
   - 로그인 후 "보안" 탭 클릭

2. **2단계 인증 활성화**
   - "2단계 인증" 클릭
   - "시작하기" 버튼 클릭
   - 휴대폰 번호 인증 완료

3. **앱 비밀번호 생성**
   - "보안" → "2단계 인증" → "앱 비밀번호"
   - "앱 선택" → "기타(사용자 지정 이름)"
   - 앱 이름 입력: `Samsung AI Dashboard`
   - "생성" 버튼 클릭

4. **앱 비밀번호 복사**
   - 생성된 16자리 비밀번호 복사 (예: `abcd efgh ijkl mnop`)
   - 이 비밀번호를 안전한 곳에 보관

### 2. proxy_server.py 설정 변경

`proxy_server.py` 파일에서 다음 부분을 실제 정보로 변경:

```python
# 발신자 정보 (실제 Gmail 계정 정보로 변경 필요)
sender_email = "your-email@gmail.com"  # 실제 Gmail 주소로 변경
sender_password = "your-app-password"   # Gmail 앱 비밀번호로 변경
```

**변경 예시:**
```python
sender_email = "jeongmin.na7@gmail.com"  # 실제 Gmail 주소
sender_password = "abcd efgh ijkl mnop"   # 생성된 앱 비밀번호
```

### 3. 서버 재시작

설정 변경 후 서버를 재시작하세요:

```bash
# 서버 중지 (Ctrl+C)
# 서버 재시작
python proxy_server.py
```

## 🔧 이메일 발송 테스트

### 1. 대시보드에서 테스트

1. **Settings 섹션 접속**
   - 대시보드 → Settings → Email Report 설정

2. **수신자 설정**
   - "직접 입력" 체크박스 선택
   - 이메일 주소 입력 (예: `test@example.com`)

3. **메시지 입력**
   - "발송 메시지 입력" 필드에 테스트 메시지 입력

4. **즉시 발송**
   - "📧 즉시 발송" 버튼 클릭

### 2. 콘솔 로그 확인

서버 콘솔에서 다음 로그를 확인:

```
📧 이메일 발송 요청: {'to_emails': ['test@example.com'], ...}
✅ 이메일 발송 완료: test@example.com
```

## 🛠️ 문제 해결

### 인증 오류
```
Gmail 인증 실패. 앱 비밀번호를 확인해주세요.
```

**해결 방법:**
- 2단계 인증이 활성화되어 있는지 확인
- 앱 비밀번호가 정확히 입력되었는지 확인
- 앱 비밀번호에 공백이 포함되어 있다면 제거

### 수신자 오류
```
수신자 이메일 오류: ...
```

**해결 방법:**
- 수신자 이메일 주소 형식 확인
- 유효한 이메일 주소인지 확인

### 연결 오류
```
SMTP 서버 연결이 끊어졌습니다.
```

**해결 방법:**
- 인터넷 연결 확인
- Gmail SMTP 서버 상태 확인
- 방화벽 설정 확인

## 📋 이메일 템플릿

### HTML 이메일 구조

발송되는 이메일은 다음과 같은 구조를 가집니다:

```html
📊 Samsung AI Dashboard 리포트

📧 발송 정보
- 발송 시간: 2025. 8. 7. 오전 12:37:24
- 수신자 수: 1명
- 선택된 그룹: 직접 입력 이메일: test@example.com

📝 메시지
[사용자가 입력한 메시지]

🔗 대시보드 링크
[대시보드 바로가기]

---
이 이메일은 Samsung AI Dashboard에서 자동으로 발송되었습니다.
© 2025 Samsung AI Experience Group
```

## 🔒 보안 주의사항

1. **앱 비밀번호 보안**
   - 앱 비밀번호를 코드에 직접 하드코딩하지 마세요
   - 환경 변수나 별도 설정 파일 사용 권장

2. **발송 제한**
   - Gmail 일일 발송 제한: 500건
   - 대량 발송 시 Gmail 정책 준수

3. **개인정보 보호**
   - 수신자 이메일 주소 보호
   - 불필요한 로그 삭제

## 📞 지원

문제가 발생하면 다음을 확인하세요:

1. **서버 로그 확인**
   - `proxy_server.py` 실행 시 콘솔 출력

2. **Gmail 설정 확인**
   - 2단계 인증 활성화
   - 앱 비밀번호 정확성

3. **네트워크 연결**
   - 인터넷 연결 상태
   - 방화벽 설정 